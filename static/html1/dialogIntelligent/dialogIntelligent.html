<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>智能问诊</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no"/>
  <link rel="stylesheet" href="css/dialogHtml.css">
  <link rel="stylesheet" href="css/intelligentHtml.css">
  <link rel="stylesheet" href="css/swiper-bundle.css">
</head>
<body>
  <div class="dialogIntelligent" id="dialogIntelligent">
    <div class="dialog" v-show="dialogOrintelligentShow">
      <div class="dialog-header">
        <img class="goBackImg" src="./images/ic_back_grey.png" style="width:24px;height:24px" @click="window.history.back()"/>
        <span class="span-title">智能问诊</span>
      </div>
      <!--对话内容-->
      <div class="dialogueContent" id="dialogueContent">
        <div class="patch-1"></div>
        <div class="dialogueItem" id="dialogueItem">
          <div class="dialogue" id="dialogue" v-for="(item, index) of messageList_x" :key="index">
            <p class="time">
              <span>{{item.time}}</span>
            </p>
            <div class="dialogueCon" :class="item._id === 0 ? 'dialogueConS' : 'dialogueConF'">
              <div class="dialogueCon-left" v-if="item._id === 1">
                <img src="images/p.png">
              </div>
              <div class="dialogueCon-center">
                <div :class="item._id === 0 ? 'self' : 'friend'">
                  {{item.message}}
                </div>
                <div v-if="item._id === 1" v-for="(subItem, index) in item.help_question" :key="index">
                  <span class="help_question-span" @click="sendValueObject(subItem)">{{subItem}}</span>
                </div>
              </div>
              <div class="dialogueCon-right" v-if="item._id === 0">
                <img src="images/patient.png">
              </div>
            </div>
          </div>
        </div>
        <div class="patch-2"></div>
        <!--导诊-->
        <div class="guidanceDiv">
          <div class="guidance" v-show="!guidanceShow">
            <span class="guidanceCon">不知道什么病,去<span class="guidanceGo" @click="guidanceGo">症状导诊</span>一下吧</span>
            <img class="closeImg" src="images/close.png" alt="关闭" @click="changeGuidanceShow(true)">
          </div>
          <div class="guidanceAdd" v-show="guidanceShow" @click="changeGuidanceShow(false)">
            <img src="images/add.png" alt="add">
          </div>
        </div>
      </div>
      <!--底部输入框-->
      <div
        class="dialogueFooter"
        ref="footer"
      >
        <div class="footer-input">
          <input
            placeholder="输入文字"
            v-model="messageVal"
            @focus="footerFocus"
            @blur="footerBlur"
          />
        </div>
        <div class="footer-button" @click="sendValue">发送</div>
      </div>
    </div>
    <div class="intelligent" v-show="!dialogOrintelligentShow" :class="detailsDialogShow === true ? 'intelligentStyle' : ''">
      <div class="intelligent-header">
        <img class="goBackImg" src="./images/ic_back_grey.png" style="width:24px;height:24px" @click="goBackDialog"/>
        <span class="span-title">症状导诊</span>
      </div>
      <div class="sidenav">
        <div class="sidenav-left">
          <div class="title">人体部位</div>
          <ul class="iu-table-view iu-table-view-inverted" style="color: #ddd;" id="part">
            <li class="iu-table-view-cell"
                v-for="(part_item, index) in part_data"
                :key="index"
                @click="getSidenavRight(part_item.part_code, 1)"
            >
              <span class="iu-table-view-cell-span" :name="part_item.part_code">{{part_item.part_name}} <i></i></span>
            </li>
          </ul>
        </div>
        <div class="sidenav-right" @touchstart="touchstart">
          <div class="bar">
            <input type="text" class="find-disease" v-model="searchString" placeholder="请输入疾病" @keyup.enter="get_search_data"/>
          </div>
          <div v-show="ifSearchData === true" class="page-item">第{{page}}页&nbsp;&nbsp;共{{page_size}}页</div>
          <div v-show="ifSearchData === true" class="dis-data">
            <ul class="iu-table-view-ui">
              <li
                v-show="page > 1"
                class="iu-table-view-cell"
                @click="goPrePage"
              >
                <a>上一页</a>
              </li>
              <li
                class="iu-table-view-cell"
                v-for="dis in disease_data"
                @click="goDetails(dis.disease_name)"
              >
                <span>{{dis.disease_name}}</span>
              </li>
              <li
                v-show="page < page_size"
                class="iu-table-view-cell"
                @click="goNextPage"
              >
                <a>下一页</a>
              </li>
            </ul>
          </div>
          <div v-show="ifSearchData === false" class="search-item">暂无您搜索的疾病</div>
        </div>
      </div>
      <div class="in-content">
        <div style="padding: 10px 80px;">
          <div id="segmentedControl" class="in-segmented-control">
            <a class="in-control-item" :class="{'in-active': controlItemId === 1}" @click="changeControlShow(1)">男性</a>
            <a class="in-control-item" :class="{'in-active': controlItemId === 2}" @click="changeControlShow(2)">女性</a>
            <a class="in-control-item" :class="{'in-active': controlItemId === 3}" @click="changeControlShow(3)">儿童</a>
          </div>
        </div>
        <div>
          <div id="item1" class="control-content" :class="{'control-content-active': controlItemId === 1}" @click="getParts(1)">
            <div class="swiper-container" id="swiper-1">
              <div class="swiper-wrapper">
                <div class="swiper-slide" @click="manclick">
                  <div class="person-front" @click="onfront">
                    <div class="m-head" @click="onfhead">
                      <div class="m-big-head"></div>
                      <div class="m-big-ear"></div>
                      <div class="m-big-eyes"></div>
                      <div class="m-big-nose"></div>
                      <div class="m-big-mouth"></div>
                    </div>
                    <div class="m-face"></div>
                    <div class="m-neck"></div>
                    <div class="m-left-arm"></div>
                    <div class="m-right-arm"></div>
                    <div class="m-belly"></div>
                    <div class="m-chest"></div>
                    <div class="m-middle" ></div>
                    <div class="m-left-leg"></div>
                    <div class="m-right-leg"></div>
                  </div>
                </div>
                <div class="swiper-slide" @click="manclick">
                  <div class="person-back" @click="onback">
                    <div class="m-back-neck"></div>
                    <div class="m-back-left-arm"></div>
                    <div class="m-back-right-arm"></div>
                    <div class="m-back"></div>
                    <div class="m-back-belly"></div>
                    <div class="m-back-pelvis"></div>
                    <div class="m-back-middle"></div>
                    <div class="m-back-leg"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div id="item2" class="control-content" :class="{'control-content-active': controlItemId === 2}" @click="getParts(2)">
            <div class="swiper-container" id="swiper-2">
              <div class="swiper-wrapper">
                <div class="swiper-slide" @click="womanclick">
                  <div class="female-front" @click="onfemale">
                    <div class="f-head" @click="onghead">
                      <div class="f-big-head"></div>
                      <div class="f-big-face"></div>
                      <div class="f-big-ear"></div>
                      <div class="f-big-eyes"></div>
                      <div class="f-big-nose"></div>
                      <div class="f-big-mouth"></div>
                    </div>
                    <div class="f-face"></div>
                    <div class="f-neck"></div>
                    <div class="f-left-arm"></div>
                    <div class="f-right-arm"></div>
                    <div class="f-chest"></div>
                    <div class="f-belly"></div>
                    <div class="f-middle"></div>
                    <div class="f-left-leg"></div>
                    <div class="f-right-leg"></div>
                  </div>
                </div>
                <div class="swiper-slide" @click="womanclick">
                  <div class="female-back" @click="onfback">
                    <div class="f-back-left-arm"></div>
                    <div class="f-back-right-arm"></div>
                    <div class="f-back"></div>
                    <div class="f-back-bone"></div>
                    <div class="f-back-lion"></div>
                    <div class="f-back-pelvis"></div>
                    <div class="f-back-hip"></div>
                    <div class="f-back-leg"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div id="item3" class="control-content" :class="{'control-content-active': controlItemId === 3}" @click="getParts(3)">
            <div class="swiper-container" id="swiper-3">
              <div class="swiper-wrapper">
                <div class="swiper-slide" @click="childclick">
                  <div class="children-front" @click="oncmale">
                    <div class="c-head" @click="onchead">
                      <div class="c-big-head"></div>
                      <div class="c-big-face"></div>
                      <div class="c-big-ear"></div>
                      <div class="c-big-eyes"></div>
                      <div class="c-big-nose"></div>
                      <div class="c-big-mouth"></div>
                    </div>
                    <div class="c-neck"></div>
                    <div class="c-left-arm"></div>
                    <div class="c-right-arm"></div>
                    <div class="c-chest"></div>
                    <div class="c-belly"></div>
                    <div class="c-middle"></div>
                    <div class="c-left-leg"></div>
                    <div class="c-right-leg"></div>
                  </div>
                </div>
                <div class="swiper-slide" @click="childclick">
                  <div class="children-back" @click="oncback">
                    <div class="c-back-bone"></div>
                    <div class="c-back-arm"></div>
                    <div class="c-back-arm-right"></div>
                    <div class="c-back-buttocks"></div>
                    <div class="c-back-loins"></div>
                    <div class="c-back-leg"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="detailsDialogDiv" :style="{'display' : detailsDialogShow ? 'block' : 'none'}">
        <div class="detailsDialog">
          <div class="detailsDialog-con">
            <div class="detailsDialog-body">
              <div class="detailsDialog-card">
                <div class="card-media">
                  <img src="./images/card_bg.jpg"/>
                  <div class="card-title-sub-title">
                    <div class="card-title-sub-title-con">
                      <div class="card-title">{{cardTitle}}</div>
                      <div class="card-sub-title">疾病详情</div>
                    </div>
                  </div>
                </div>
                <div class="card-content">
                  <div class="card-text">
                    <div class="card-text-con">
                      {{cardTextVal}}
                    </div>
                  </div>
                  <div class="card-actions">
                    <span class="ask" @click="goAsk">去问小智</span>
                    <a class="goDepartment">相关科室</a>
                  </div>
                </div>
              </div>
            </div>
            <div
              class="detailsDialog-action"
              @click="closeDetailsDialog"
            >
              <span>关闭</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script type="application/javascript" src="js/3.5.1.jquery.min.js"></script>
  <script src="js/vue@2.6.12.js"></script>
  <script src="js/axios.min.js"></script>
  <script src="js/swiper-bundle.js"> </script>
  <script src="js/swiper.animate1.0.3.min.js"></script>
  <script>
    $(function () {
      let now = new Date()
      // let time = `${now.getHours()}:${now.getMinutes()}`
      let time = `${now.getHours()}`.length === 2 ? (`${now.getMinutes()}`.length === 2?`${now.getHours()}
 :${now.getMinutes()}` : `${now.getHours()}:0${now.getMinutes()}`)
        :(`${now.getMinutes()}`.length === 2 ? `0${now.getHours()}:${now.getMinutes()}`:`0${now.getHours()}:0${now.getMinutes()}`)
      const url = 'http://122.112.148.65:9005'
      const url1 = 'http://122.112.148.65:9004'
      let vm = new Vue({
        el: '#dialogIntelligent',
        data: {
          ss: false,
          messageList_x: [], // 当前聊天记录
          messageVal: '', // 聊天值
          num: 0,
          userData: {
            self: {
              "_id": 0,
              "avatar": "/static/images/patient.png",
              "name": "不忘初心"
            },
            friend: {
              "_id": 1,
              "avatar": "/static/images/p.png",
              "name": "智杰小智"
            }
          },
          guidanceShow: false, // 导诊提示显示/隐藏
          ifSelf: false,
          timerInput: '',
          dialogOrintelligentShow: true,
          controlItemId: 1, // 1(男性), 2(女性), 3(儿童)
          part_data: [],
          part_code: '',
          floatX:0,
          floatY:0,
          searchString: '',
          disease_data: [],
          page: 1,
          page_size: 0,
          ifSearchData: false,
          dialogName: '',
          cardTitle: '',
          cardTextVal: '',
          detailsDialogShow: false,
          askQuestion: ''
        },
        created() {
          this.initStorge()
          this.getParts(1)
          this.phoneFlag()
        },
        mounted() {
          this.nowMessageList()
          setTimeout(() => {
            let swiper = new Swiper('#swiper-1', {
              effect: 'cube',
              grabCursor: true,
              cubeEffect: {
                shadow: false,
              },
              observer: true,
              observeParents: true,
              navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
              }
            });
            let swipers = new Swiper('#swiper-2', {
              effect: 'cube',
              grabCursor: true,
              cubeEffect: {
                shadow: false,
              },
              observer: true,
              observeParents: true,
              navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
              }
            });
            let swiperse = new Swiper('#swiper-3', {
              effect: 'cube',
              grabCursor: true,
              cubeEffect: {
                shadow: false,
              },
              observer: true,
              observeParents: true,
              navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
              }
            });
          })
        },
        methods: {
          goBackDialog() {
            this.dialogOrintelligentShow = true
            this.$nextTick(() => {
              $(document).scrollTop($("#dialogueItem").height())
            }, 100)
          },
          goAsk() {
            this.dialogOrintelligentShow = true
            this.messageVal = this.askQuestion
            this.sendValue()
          },
          guidanceGo() {
            this.dialogOrintelligentShow = false
            this.detailsDialogShow = false
            this.$nextTick(() => {
              $(document).scrollTop(0)
            })
          },
          initStorge() {
            // 初始化一些常用数据，根据vue的理念，使用到的数据都必须先进行初始化设置。
            let state = {
              // 初始化基础数据
              data: {self: {}, friends: []},
              // ajax请求数据是否结束
              isAjax: false,
              // 当前被选中或者在聊天中的friend的_id
              activeId: 1,
              // 聊天队列，这里为每个朋友添加了一个聊天队列，偷懒写法，如果有需要可以改成动态添加
              // _id是作为聊天队列的标记，list是聊天内容，list里的数据格式{_id:xx, message:xxx},组件内会根据_id来将对话插入
              // 到左边，还是右边，判断message是自己还是ai发出的
              messageList: [
                {
                  _id: 1,
                  list: [{_id: 1, message: '你好,我是小智,欢迎您进行咨询,咨询方式可以参考以下内容:', time: time, help_question: ['咳嗽用药', '咳嗽的症状', '头痛忌口']}],
                }
              ]
            }
            localStorage.setItem('vue-chat-session', JSON.stringify(state));
          },
          // 对当前消息队列中的消息进行加工，添加对应的好友资料
          nowMessageList() {
            let message = localStorage.getItem('vue-chat-session');
            let messObj = JSON.parse(message);
            let list = messObj.messageList;
            if(typeof(list[0].list) === "undefined" || list[0].list === null){
              list[0].list = [{"_id":1,"message":"你好,我是小智,欢迎您进行咨询,咨询方式可以参考以下内容:","time":time,"help_question":["咳嗽用药","咳嗽的症状","头痛忌口"]}]
            }
            let messageData = list[0].list
            for(let i = 0; i < messageData.length;i++){
              if(typeof(messageData[i].more_question) != "undefined"){
                messageData[i].more = true
                messageData[i].less = false
                messageData[i].question = []
              }
            }
            this.messageList_x = messageData
          },
          sendValue() {
            const options = {
              self: true,
              _id: this.userData.friend._id,
              message: this.messageVal
            }
            this.changeList(options)
            this.sendValue2(options)
          },
          sendValueObject(val) {
            const options = {
              self: true,
              _id: this.userData.friend._id,
              message: val
            }
            this.changeList(options)
            this.sendValue2(options)
          },
          sendValue2(options) {
            this.num = 1
            if (options.message) {
              axios.get('http://122.112.148.65:9004/qaRequest', {
                params: {
                  question: options.message
                }
              })
                .then((res) => {
                  let _id = 1
                  let robotData = res.data
                  let len = robotData.help_question.length
                  let help_question = []
                  let more_question = []
                  let question = []
                  let message = ''
                  if(robotData.final_answers instanceof Array){
                    message = robotData.final_answers [0]
                  }else{
                    message = robotData.final_answers
                  }
                  if(len>5){
                    for(let i = 0; i<len;i++){
                      if(i<5){
                        help_question.push(robotData.help_question[i])
                      }else{
                        more_question.push(robotData.help_question[i])
                      }
                    }
                    this.changeList({ _id, message: message ,help_question:help_question,more_question:more_question,question:question,more:true,less:false})
                  }else{
                    this.changeList({ _id, message: message ,help_question:robotData.help_question,more:false,less:false})
                  }
                  this.messageVal = ''
                })
            }
          },
          changeList(obj) {
            const storageVal = JSON.parse(localStorage.getItem('vue-chat-session'))
            const messageList = storageVal.messageList
            // 判断信息是自己的还是ai的，然后插入聊天队列中
            if (obj.self) {
              // 信息是自己发送的
              for(let i = 0; i< messageList.length ;i++){
                obj._id = 0
                messageList[i].list.push({ ...obj, time })
              }
            } else {
              // 信息是ai发送的
              for(let i = 0; i<messageList.length ;i++){
                messageList[i].list.push({ ...obj, time })
              }
            }
            localStorage.setItem('vue-chat-session', JSON.stringify(storageVal))
            this.nowMessageList()
          },
          changeGuidanceShow(flag) {
            this.guidanceShow = flag
          },
          // 输入框获得焦点时触发
          footerFocus() {
            this.timerInput = setInterval(() => {
              // 完美解决输入框被软键盘遮挡
              this.$refs.footer.scrollIntoView(false)
            }, 200)
          },
          footerBlur() {
            // 输入框失去焦点时清除定时器
            clearInterval(this.timerInput)
          },
          phoneFlag() {
            let ua = navigator.userAgent.toLowerCase();
            let isAndroid = ua.indexOf('android') > -1;
            if(isAndroid){
              this.floatX = 20
              this.floatY = 40
            }else{
              this.floatX = 0
              this.floatY = 0
            }
          },
          getParts(x) {
            axios.get(url + '/getParts', {
              params: {
                sex: x
              }
            }).then(res => {
              this.part_data = res.data.data
            })
          },
          // 切换显示类型
          changeControlShow(num) {
            this.controlItemId = num
            this.getParts(num)
          },
          manclick(e){
            const obj = $(e.target)
            const fhead = $('.m-head')
            if(obj[0].className === "swiper-slide swiper-slide-active"){
              this.tapHide()
              fhead.fadeOut().children().fadeOut();
            }
          },
          onfront(e){
            let that = this
            let obj = $(e.target)
            let fhead = $('.m-head')
            let containX = e.clientX - obj.offset().left - that.floatX;
            let containY = e.clientY - obj.offset().top ;
            that.searchString = ""
            if((103 < containX) && (containX < 156) && (1 < containY) && (containY < 70)){
              fhead.fadeIn().siblings().fadeOut();
            }else if((106 < containX) && (containX < 147) && (70 < containY) && (containY < 98)){
              if(fhead.css('display') === 'none'){
                obj.children('.m-neck').fadeIn().siblings().fadeOut();
                obj.children('.m-neck').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('颈部')
                }, 250);
              }
            }else if((0 < containX) && (containX < 88) && (84 < containY) && (containY < 290) && ((-2.37 * containX + 292.42) < (containY + 30)) && ((-2.37 * containX + 292.42) > (containY - 30))){
              if(fhead.css('display') === 'none'){
                obj.children('.m-right-arm').fadeIn().siblings().fadeOut();
                obj.children('.m-right-arm').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('上肢')
                }, 250);
              }
            }else if((169 < containX) && (containX < 253) && (86 < containY) && (containY < 296) && ((2.47 * containX - 331.14) < (containY + 30)) && ((2.47 * containX - 331.14) > (containY - 30))){
              if(fhead.css('display') === 'none'){
                obj.children('.m-left-arm').fadeIn().siblings().fadeOut();
                obj.children('.m-left-arm').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('上肢')
                }, 250);
              }
            }else if((89 < containX) && (containX < 164) && (101 < containY) && (containY < 156)){
              if(fhead.css('display') === 'none'){
                obj.children('.m-chest').fadeIn().siblings().fadeOut();
                obj.children('.m-chest').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('胸部')
                }, 250);
              }
            }else if((88 < containX) && (containX < 166) && (156 < containY) && (containY < 225)){
              if(fhead.css('display') === 'none'){
                obj.children('.m-belly').fadeIn().siblings().fadeOut();
                obj.children('.m-belly').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('腹部')
                }, 250);
              }
            }else if((80 < containX) && (containX < 172) && (233 < containY) && (containY < 261)){
              if(fhead.css('display') === 'none'){
                obj.children('.m-middle').fadeIn().siblings().fadeOut();
                obj.children('.m-middle').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('生殖部位')
                }, 250);
              }
            }else if((148 < containX) && (containX < 175) && (270 < containY) && (containY < 538)){
              if(fhead.css('display') === 'none'){
                obj.children('.m-left-leg').fadeIn().siblings().fadeOut();
                obj.children('.m-left-leg').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('下肢')
                }, 250);
              }
            }else if((83 < containX) && (containX < 112) && (270 < containY) && (containY < 538)){
              if(fhead.css('display') === 'none'){
                obj.children('.m-right-leg').fadeIn().siblings().fadeOut();
                obj.children('.m-right-leg').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('下肢')
                }, 250);
              }
            }else{
              if(fhead.css('display') === 'none'){
                that.tapHide();
                obj.children().fadeOut().children().fadeOut();
              }
            }
          },
          onfhead(e){
            let that = this
            const obj = $(e.target)
            const containX = e.clientX  - obj.offset().left;
            const containY = e.clientY - obj.offset().top -that.floatX;
            that.searchString = ""
            if((43 < containX) && (containX < 215) && (43 < containY) && (containY < 107)){
              obj.children('.m-big-head').fadeIn().siblings().fadeOut();
              obj.children('.m-big-head').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('头部')
              }, 250);
            }else if((30 < containX) && (containX < 56) && (158 < containY) && (containY < 235)){
              obj.children('.m-big-ear').fadeIn().siblings().fadeOut();
              obj.children('.m-big-ear').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('耳')
              }, 250);
            }else if((196 < containX) && (containX < 235) && (158 < containY) && (containY < 235)){
              obj.children('.m-big-ear').fadeIn().siblings().fadeOut();
              obj.children('.m-big-ear').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('耳')
              }, 250);
            }else if((106 < containX) && (containX < 138) && (170 < containY) && (containY < 205)){
              obj.children('.m-big-nose').fadeIn().siblings().fadeOut();
              obj.children('.m-big-nose').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('鼻')
              }, 250);
            }else if((50 < containX) && (containX < 200) && (149 < containY) && (containY < 162)){
              obj.children('.m-big-eyes').fadeIn().siblings().fadeOut();
              obj.children('.m-big-eyes').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('眼')
              }, 250);
            }else if((56 < containX) && (containX < 188) && (218 < containY) && (containY < 240)){
              obj.children('.m-big-mouth').fadeIn().siblings().fadeOut();
              obj.children('.m-big-mouth').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('口')
              }, 250);
            }else if((57 < containX) && (containX < 209) && (107 < containY) && (containY < 307)){
            }else{
              that.tapHide();
              obj.fadeOut().children().fadeOut();
            }
          },
          womanclick(e) {
            let obj = $(e.target)
            let fhead = $('.f-head')
            if(obj[0].className === "swiper-slide swiper-slide-active"){
              this.tapHide()
              fhead.fadeOut().children().fadeOut();
            }
          },
          onfemale(e){
            let that = this
            let obj = $(e.target)
            let ghead = $('.f-head');
            let containX = e.clientX - obj.offset().left - that.floatX;
            let containY = e.clientY - obj.offset().top  - that.floatX;
            that.searchString = ""
            if((96 < containX) && (containX < 141) && (0 < containY) && (containY < 48)){
              ghead.fadeIn().siblings().fadeOut();
            }else if((108 < containX) && (containX < 131) && (48 < containY) && (containY < 72)){
              if(ghead.css('display') === 'none'){
                obj.children('.f-neck').fadeIn().siblings().fadeOut();
                obj.children('.f-neck').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('颈部')
                }, 250);
              }
            }else if((0 < containX) && (containX < 91) && (69 < containY) && (containY < 215) && ((-1.43 * containX + 203.55) < (containY + 30)) && ((-1.43 * containX + 203.55) > (containY - 30))){
              if(ghead.css('display') === 'none'){
                obj.children('.f-right-arm').fadeIn().siblings().fadeOut();
                obj.children('.f-right-arm').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('上肢')
                }, 250);
              }
            }else if((147 < containX) && (containX < 254) && (68 < containY) && (containY < 194) && ((1.18 * containX - 104.80) < (containY + 30)) && ((1.18 * containX - 104.80) > (containY - 30))){
              if(ghead.css('display') === 'none'){
                obj.children('.f-left-arm').fadeIn().siblings().fadeOut();
                obj.children('.f-left-arm').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('上肢')
                }, 250);
              }
            }else if((89 < containX) && (containX < 148) && (71 < containY) && (containY < 120)){
              if(ghead.css('display') === 'none'){
                obj.children('.f-chest').fadeIn().siblings().fadeOut();
                obj.children('.f-chest').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('胸部')
                }, 250);
              }
            }else if((94 < containX) && (containX < 144) && (120 < containY) && (containY < 171)){
              if(ghead.css('display') === 'none'){
                obj.children('.f-belly').fadeIn().siblings().fadeOut();
                obj.children('.f-belly').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('腹部')
                }, 250);
              }
            }else if((83 < containX) && (containX < 157) && (181 < containY) && (containY < 204)){
              if(ghead.css('display') === 'none'){
                obj.children('.f-middle').fadeIn().siblings().fadeOut();
                obj.children('.f-middle').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('生殖部位')
                }, 250);
              }
            }else if((96 < containX) && (containX < 118) && (204 < containY) && (containY < 420)){
              if(ghead.css('display') === 'none'){
                obj.children('.f-right-leg').fadeIn().siblings().fadeOut();
                obj.children('.f-right-leg').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('下肢')
                }, 250);
              }
            }else if((122 < containX) && (containX < 145) && (204 < containY) && (containY < 420)){
              if(ghead.css('display') === 'none'){
                obj.children('.f-left-leg').fadeIn().siblings().fadeOut();
                obj.children('.f-left-leg').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('下肢')
                }, 250);
              }
            }else{
              if(ghead.css('display') === 'none'){
                that.tapHide();
                obj.children().fadeOut();
              }
            }
          },
          onghead(e){
            let that = this
            let obj = $(e.target)
            let containX = e.clientX - obj.offset().left;
            let containY = e.clientY - obj.offset().top - that.floatX;
            that.searchString = ""
            if((69 < containX) && (containX < 187) && (69 < containY) && (containY < 108)){
              obj.children('.f-big-head').fadeIn().siblings().fadeOut();
              obj.children('.f-big-head').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('头部')
              }, 250);
            }else if((54 < containX) && (containX < 75) && (143 < containY) && (containY < 191)){
              obj.children('.f-big-ear').fadeIn().siblings().fadeOut();
              obj.children('.f-big-ear').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('耳')
              }, 250);
            }else if((187 < containX) && (containX < 225) && (143 < containY) && (containY < 191)){
              obj.children('.f-big-ear').fadeIn().siblings().fadeOut();
              obj.children('.f-big-ear').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('耳')
              }, 250);
            }else if((71 < containX) && (containX < 183) && (148 < containY) && (containY < 163)){
              obj.children('.f-big-eyes').fadeIn().siblings().fadeOut();
              obj.children('.f-big-eyes').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('眼')
              }, 250);
            }else if((120 < containX) && (containX < 155) && (151 < containY) && (containY < 189)){
              obj.children('.f-big-nose').fadeIn().siblings().fadeOut();
              obj.children('.f-big-nose').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('鼻')
              }, 250);
            }else if((80 < containX) && (containX < 172) && (200 < containY) && (containY < 235)){
              obj.children('.f-big-mouth').fadeIn().siblings().fadeOut();
              obj.children('.f-big-mouth').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('口')
              }, 250);
            }else if((69 < containX) && (containX < 187) && (108 < containY) && (containY < 240)){
            }else{
              that.tapHide();
              obj.fadeOut().children().fadeOut();
            }
          },
          onfback(e){
            let that = this
            let obj = $(e.target)
            let containX = e.clientX - obj.offset().left - that.floatX;
            let containY = e.clientY - obj.offset().top - that.floatY;
            that.searchString = ""
            if((13 < containX) && (containX < 94) && (70 < containY) && (containY < 209) && ((-1.74 * containX + 203.42) < (containY + 30)) && ((-1.74 * containX + 203.42) > (containY - 30))){
              obj.children('.f-back-left-arm').fadeIn().siblings().fadeOut();
              obj.children('.f-back-right-arm').fadeIn().siblings().fadeOut();
              obj.children('.f-back').fadeIn().siblings().fadeOut();
              obj.children('.f-back').fadeOut().siblings().fadeOut();
              obj.children('.f-back-left-arm').fadeOut().siblings().fadeOut();
              obj.children('.f-back-right-arm').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('皮肤')
              }, 250);
            }else if((94 < containX) && (containX < 146) && (47 < containY) && (containY < 75)){
              obj.children('.f-back-left-arm').fadeIn().siblings().fadeOut();
              obj.children('.f-back-right-arm').fadeIn().siblings().fadeOut();
              obj.children('.f-back').fadeIn().siblings().fadeOut();
              obj.children('.f-back').fadeOut().siblings().fadeOut();
              obj.children('.f-back-left-arm').fadeOut().siblings().fadeOut();
              obj.children('.f-back-right-arm').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('皮肤')
              }, 250);
            }else if((147 < containX) && (containX < 254) && (68 < containY) && (containY < 194) && ((1.18 * containX - 104.80) < (containY + 30)) && ((1.18 * containX - 104.80) > (containY - 30))){
              obj.children('.f-back-left-arm').fadeIn().siblings().fadeOut();
              obj.children('.f-back-right-arm').fadeIn().siblings().fadeOut();
              obj.children('.f-back').fadeIn().siblings().fadeOut();
              obj.children('.f-back').fadeOut().siblings().fadeOut();
              obj.children('.f-back-left-arm').fadeOut().siblings().fadeOut();
              obj.children('.f-back-right-arm').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('皮肤')
              }, 250);
            }else if((88 < containX) && (containX < 150) && (90 < containY) && (containY < 121)){
              obj.children('.f-back-bone').fadeIn().siblings().fadeOut();
              obj.children('.f-back-bone').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('全身')
              }, 250);
            }else if((93 < containX) && (containX < 145) && (121 < containY) && (containY < 162)){
              obj.children('.f-back-lion').fadeIn().siblings().fadeOut();
              obj.children('.f-back-pelvis').fadeIn().siblings().fadeOut();
              obj.children('.f-back-pelvis').fadeOut().siblings().fadeOut();
              obj.children('.f-back-lion').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('腰部')
              }, 250);
            }else if((88 < containX) && (containX < 149) && (162 < containY) && (containY < 176)){
              obj.children('.f-back-lion').fadeIn().siblings().fadeOut();
              obj.children('.f-back-pelvis').fadeIn().siblings().fadeOut();
              obj.children('.f-back-pelvis').fadeOut().siblings().fadeOut();
              obj.children('.f-back-lion').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('腰部')
              }, 250);
            }else if((83 < containX) && (containX < 154) && (176 < containY) && (containY < 213)){
              obj.children('.f-back-hip').fadeIn().siblings().fadeOut();
              obj.children('.f-back-hip').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('排泄部位')
              }, 250);
            }else if((124 < containX) && (containX < 164) && (218 < containY) && (containY < 391)){
              obj.children('.f-back-leg').fadeIn().siblings().fadeOut();
              obj.children('.f-back-leg').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('下肢')
              }, 250);
            }else if((76 < containX) && (containX < 115) && (218 < containY) && (containY < 391)){
              obj.children('.f-back-leg').fadeIn().siblings().fadeOut();
              obj.children('.f-back-leg').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('下肢')
              }, 250);
            }else{
              that.tapHide();
              obj.children().fadeOut();
            }
          },
          childclick(e){
            let obj = $(e.target)
            let fhead = $('.c-head')
            if(obj[0].className === "swiper-slide swiper-slide-active"){
              this.tapHide()
              fhead.fadeOut().children().fadeOut();
            }
          },
          oncmale(e){
            let that = this
            let obj = $(e.target)
            let chead = $('.c-head');
            let containX = e.clientX - obj.offset().left - that.floatX;
            let containY = e.clientY - obj.offset().top -that.floatY;
            that.searchString = ""
            if((93 < containX) && (containX < 166) && (121 < containY) && (containY < 202)){
              chead.fadeIn().siblings().fadeOut();
            }else if((107 < containX) && (containX < 155) && (202 < containY) && (containY < 221)){
              if(chead.css('display') === 'none'){
                obj.children('.c-neck').fadeIn().siblings().fadeOut();
                obj.children('.c-neck').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('颈部')
                }, 250);
              }
            }else if((13 < containX) && (containX < 98) && (214 < containY) && (containY < 291) && ((-0.68 * containX + 288.75) < (containY + 30)) && ((-0.68 * containX + 288.75) > (containY - 30))){
              if(chead.css('display') === 'none'){
                obj.children('.c-right-arm').fadeIn().siblings().fadeOut();
                obj.children('.c-right-arm').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('上肢')
                }, 250);
              }
            }else if((164 < containX) && (containX < 247) && (214 < containY) && (containY < 291) && ((0.32 * containX + 202.56) < (containY + 30)) && ((0.32 * containX + 202.56) > (containY - 30))){
              if(chead.css('display') === 'none'){
                obj.children('.c-left-arm').fadeIn().siblings().fadeOut();
                obj.children('.c-left-arm').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('上肢')
                }, 250);
              }
            }else if((98 < containX) && (containX < 164) && (221 < containY) && (containY < 256)){
              if(chead.css('display') === 'none'){
                obj.children('.c-chest').fadeIn().siblings().fadeOut();
                obj.children('.c-chest').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('胸部')
                }, 250);
              }
            }else if((94 < containX) && (containX < 168) && (256 < containY) && (containY < 304)){
              if(chead.css('display') === 'none'){
                obj.children('.c-belly').fadeIn().siblings().fadeOut();
                obj.children('.c-belly').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('腹部')
                }, 250);
              }
            }else if((91 < containX) && (containX < 170) && (304 < containY) && (containY < 330)){
              if(chead.css('display') === 'none'){
                obj.children('.c-middle').fadeIn().siblings().fadeOut();
                obj.children('.c-middle').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('生殖部位')
                }, 250);
              }
            }else if((94 < containX) && (containX < 120) && (330 < containY) && (containY < 439)){
              if(chead.css('display') === 'none'){
                obj.children('.c-right-leg').fadeIn().siblings().fadeOut();
                obj.children('.c-right-leg').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('下肢')
                }, 250);
              }
            }else if((140 < containX) && (containX < 166) && (330 < containY) && (containY < 439)){
              if(chead.css('display') === 'none'){
                obj.children('.c-left-leg').fadeIn().siblings().fadeOut();
                obj.children('.c-left-leg').fadeOut().siblings().fadeOut();
                setTimeout(function (){
                  that.tapMenu('下肢')
                }, 250);
              }
            }else{
              if(chead.css('display') === 'none'){
                that.tapHide();
                obj.children().fadeOut();
              }
            }
          },
          onchead(e){
            let that = this
            let obj = $(e.target)
            let containX = e.clientX - obj.offset().left
            let containY = e.clientY - obj.offset().top - that.floatY
            that.searchString = ""
            if((62 < containX) && (containX < 204) && (81 < containY) && (containY < 140)){
              obj.children('.c-big-head').fadeIn().siblings().fadeOut();
              obj.children('.c-big-head').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('头部')
              }, 250);
              setTimeout(function (){
                that.tapMenu('眼')
              }, 250);
            }else if((109 < containX) && (containX < 160) && (195 < containY) && (containY < 220)){
              obj.children('.c-big-nose').fadeIn().siblings().fadeOut();
              obj.children('.c-big-nose').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('鼻')
              }, 250);
            }else if((71 < containX) && (containX < 174) && (225 < containY) && (containY < 245)){
              obj.children('.c-big-mouth').fadeIn().siblings().fadeOut();
              obj.children('.c-big-mouth').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('口')
              }, 250);
            }else if((79 < containX) && (containX < 200) && (159 < containY) && (containY < 190)){
              obj.children('.c-big-eyes').fadeIn().siblings().fadeOut();
              obj.children('.c-big-eyes').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('眼')
              }, 250);
            }else if((52 < containX) && (containX < 72) && (165 < containY) && (containY < 210)){
              obj.children('.c-big-ear').fadeIn().siblings().fadeOut();
              obj.children('.c-big-ear').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('耳')
              }, 250);
            }else if((200 < containX) && (containX < 236) && (165 < containY) && (containY < 210)){
              obj.children('.c-big-ear').fadeIn().siblings().fadeOut();
              obj.children('.c-big-ear').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('耳')
              }, 250);
            }else if((68 < containX) && (containX < 197) && (140 < containY) && (containY < 263)){
            }else{
              that.tapHide();
              obj.fadeOut().children().fadeOut();
            }
          },
          oncback(e){
            let that = this
            let obj = $(e.target)
            let containX = e.clientX - obj.offset().left - that.floatX
            let containY = e.clientY - obj.offset().top - that.floatY
            that.searchString = ""
            if((86 < containX) && (containX < 160) && (202 < containY) && (containY < 245)){
              obj.children('.c-back-bone').fadeIn().siblings().fadeOut();
              obj.children('.c-back-bone').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('全身')
              }, 250);
            }else if((13 < containX) && (containX < 98) && (214 < containY) && (containY < 291) && ((-0.68 * containX + 288.75) < (containY + 30)) && ((-0.68 * containX + 288.75) > (containY - 30))){
              obj.children('.c-back-arm').fadeIn().siblings().fadeOut();
              obj.children('.c-back-arm').fadeOut().siblings().fadeOut();
              obj.children('.c-back-arm-right').fadeIn().siblings().fadeOut();
              obj.children('.c-back-arm-right').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('皮肤')
              }, 250);
            }else if((164 < containX) && (containX < 247) && (214 < containY) && (containY < 291) && ((0.32 * containX + 182.56) < (containY + 30)) && ((0.32 * containX + 182.56) > (containY - 30))){
              obj.children('.c-back-arm').fadeIn().siblings().fadeOut();
              obj.children('.c-back-arm').fadeOut().siblings().fadeOut();
              obj.children('.c-back-arm-right').fadeIn().siblings().fadeOut();
              obj.children('.c-back-arm-right').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('皮肤')
              }, 250);
            }else if((95 < containX) && (containX < 160) && (300 < containY) && (containY < 340)){
              obj.children('.c-back-buttocks').fadeIn().siblings().fadeOut();
              obj.children('.c-back-buttocks').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('排泄部位')
              }, 250);
            }else if((90 < containX) && (containX < 150) && (275 < containY) && (containY < 300)){
              obj.children('.c-back-loins').fadeIn().siblings().fadeOut();
              obj.children('.c-back-loins').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('腰部')
              }, 250);
            }else if((136 < containX) && (containX < 167) && (340 < containY) && (containY < 430)){
              obj.children('.c-back-leg').fadeIn().siblings().fadeOut();
              obj.children('.c-back-leg').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('下肢')
              }, 250);
            }else if((90 < containX) && (containX < 121) && (340 < containY) && (containY < 430)){
              obj.children('.c-back-leg').fadeIn().siblings().fadeOut();
              obj.children('.c-back-leg').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('下肢')
              }, 250);
            }else{
              that.tapHide();
              obj.children().fadeOut();
            }
          },
          onback(e){
            let that = this
            let obj = $(e.target)
            let containX = e.clientX - obj.offset().left - that.floatX;
            let containY = e.clientY - obj.offset().top - that.floatY;
            that.searchString = ""
            if((102 < containX) && (containX < 155) && (62 < containY) && (containY < 95)){
              obj.children('.m-back-neck').fadeIn().siblings().fadeOut();
              obj.children('.m-back-left-arm').fadeIn().siblings().fadeOut();
              obj.children('.m-back-right-arm').fadeIn().siblings().fadeOut();
              obj.children('.m-back-neck').fadeOut().siblings().fadeOut();
              obj.children('.m-back-left-arm').fadeOut().siblings().fadeOut();
              obj.children('.m-back-right-arm').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('皮肤')
              }, 250);
            }else if((0 < containX) && (containX < 88) && (84 < containY) && (containY < 290) && ((-2.37 * containX + 262.42) < (containY + 30)) && ((-2.37 * containX + 262.42) > (containY - 30))){
              obj.children('.m-back-neck').fadeIn().siblings().fadeOut();
              obj.children('.m-back-left-arm').fadeIn().siblings().fadeOut();
              obj.children('.m-back-right-arm').fadeIn().siblings().fadeOut();
              obj.children('.m-back-neck').fadeOut().siblings().fadeOut();
              obj.children('.m-back-left-arm').fadeOut().siblings().fadeOut();
              obj.children('.m-back-right-arm').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('皮肤')
              }, 250);
            }else if((169 < containX) && (containX < 253) && (86 < containY) && (containY < 296) && ((2.47 * containX - 331.14) < (containY + 30)) && ((2.47 * containX - 331.14) > (containY - 30))){
              obj.children('.m-back-neck').fadeIn().siblings().fadeOut();
              obj.children('.m-back-left-arm').fadeIn().siblings().fadeOut();
              obj.children('.m-back-right-arm').fadeIn().siblings().fadeOut();
              obj.children('.m-back-neck').fadeOut().siblings().fadeOut();
              obj.children('.m-back-left-arm').fadeOut().siblings().fadeOut();
              obj.children('.m-back-right-arm').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('皮肤')
              }, 250);
            }else if((92 < containX) && (containX < 168) && (98 < containY) && (containY < 154)){
              obj.children('.m-back').fadeIn().siblings().fadeOut();
              obj.children('.m-back').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('全身')
              }, 250);
            }else if((88 < containX) && (containX < 166) && (154 < containY) && (containY < 195)){
              obj.children('.m-back-belly').fadeIn().siblings().fadeOut();
              obj.children('.m-back-belly').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('腰部')
              }, 250);
            }else if((81 < containX) && (containX < 172) && (195 < containY) && (containY < 211)){
              obj.children('.m-back-pelvis').fadeIn().siblings().fadeOut();
              obj.children('.m-back-pelvis').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('腰部')
              }, 250);
            }else if((78 < containX) && (containX < 176) && (211 < containY) && (containY < 246)){
              obj.children('.m-back-middle').fadeIn().siblings().fadeOut();
              obj.children('.m-back-middle').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('排泄部位')
              }, 250);
            }else if((130 < containX) && (containX < 160) && (275 < containY) && (containY < 498)){
              obj.children('.m-back-leg').fadeIn().siblings().fadeOut();
              obj.children('.m-back-leg').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('下肢')
              }, 250);
            }else if((83 < containX) && (containX < 114) && (275 < containY) && (containY < 498)){
              obj.children('.m-back-leg').fadeIn().siblings().fadeOut();
              obj.children('.m-back-leg').fadeOut().siblings().fadeOut();
              setTimeout(function (){
                that.tapMenu('下肢')
              }, 250);
            }else{
              that.tapHide();
              obj.children().fadeOut();
            }
          },
          tapHide(){
            $('.sidenav').css('width','0');
            $('.in-content').css('margin-left','0')
          },
          taparr(){
            if($('.sidenav')[0].clientWidth === 0){
              return false
            }else{
              return true
            }
          },
          tapMenu(x){
            let that = this
            $('.sidenav').css('width','70vw')
            $('.in-content').css('margin-left','70vw');
            const currentPartData = this.part_data.find((item) => {
              return item.part_name === x
            })
            this.part_code = currentPartData.part_code.join(',')
            this.page = 1
            that.partCode(this.part_code, this.controlItemId, this.page)
          },
          partCode(part_code, sex, page){
            this.part_code = part_code
            axios.get(url + '/getSymptomByBody', {
              params: {
                bodyCode: this.part_code,
                sex: sex,
                page: page
              }
            }).then(res => {
              if(res.data.data.length === 0){
                this.ifSearchData = false
              } else {
                this.ifSearchData = true
                this.disease_data = res.data.data
                this.page_size = res.data.page_size
              }
            })
          },
          touchstart(e){
            this.startY = e.changedTouches[0].pageY
          },
          get_search_data(){
            this.page = 1
            if(this.searchString === ""){
              axios.get(url + '/getSymptomByBody', {
                params: {
                  bodyCode: this.part_code,
                  sex: this.controlItemId,
                  page: this.page
                }
              }).then(res => {
                if(res.data.data.length === 0){
                  this.ifSearchData = false
                } else {
                  this.ifSearchData = true
                  this.disease_data = res.data.data
                  this.page_size = res.data.page_size
                }
              })
            }else{
              axios.get(url + '/getSymptomByBody', {
                params: {
                  bodyCode: this.part_code,
                  sex: this.controlItemId,
                  filter: this.searchString
                }
              }).then(res => {
                if(res.data.data.length === 0){
                  this.ifSearchData = false
                  this.page = 1
                  this.page_size = 1
                } else {
                  this.ifSearchData = true
                  this.disease_data = res.data.data
                  this.page = 1
                  this.page_size = 1
                }
              })
            }
          },
          goPrePage() {
            this.page = this.page - 1
            if(this.searchString === "") {
              axios.get(url + '/getSymptomByBody', {
                params: {
                  bodyCode: this.part_code,
                  sex: this.controlItemId,
                  page: this.page
                }
              }).then(res => {
                if (res.data.data.length === 0) {
                  this.ifSearchData = false
                } else {
                  this.ifSearchData = true
                  this.disease_data = res.data.data
                  this.page_size = res.data.page_size
                }
              })
            }
          },
          goNextPage() {
            this.page = this.page + 1
            if(this.searchString === "") {
              axios.get(url + '/getSymptomByBody', {
                params: {
                  bodyCode: this.part_code,
                  sex: this.controlItemId,
                  page: this.page
                }
              }).then(res => {
                if (res.data.data.length === 0) {
                  this.ifSearchData = false
                } else {
                  this.ifSearchData = true
                  this.disease_data = res.data.data
                  this.page_size = res.data.page_size
                }
              })
            }
          },
          // 点击左侧列表，获取右侧数据
          getSidenavRight(code, page) {
            this.searchString = ''
            this.partCode(code.join(","), this.controlItemId, page)
          },
          goDetails(name) {
            axios.get(url1 + '/qaRequest', {
              params: {
                question: name
              }
            }).then(res => {
              this.tapHide()
              this.detailsDialogShow = true
              this.cardTitle = name
              this.askQuestion = name
              if(res.data.final_answers instanceof Array){
                this.cardTextVal = res.data.final_answers[0]
              }else{
                this.cardTextVal = res.data.final_answers
              }
              if(this.cardTextVal === "这个问题太难了,小智回答不上来,\n你可以参考下面的方式进行咨询"){
                this.cardTextVal = "暂无详情"
              }
            })
          },
          closeDetailsDialog() {
            this.detailsDialogShow = false
            this.cardTitle = ''
            this.cardTextVal = ''
          }
        },
        watch: {
          messageList_x() {
            this.$nextTick(() => {
              $(document).scrollTop($("#dialogueItem").height())
            })
          }
        }
      })
    })
  </script>
</body>
</html>
